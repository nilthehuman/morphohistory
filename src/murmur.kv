#kivy 2.1

<TopBoxLayout>
    orientation: 'horizontal'
    size: root.width, root.height
    spacing: 0
    canvas:
        Color:
            rgb: 0, 0.08, 0.12
        Rectangle:
            pos: self.pos
            size: self.size
    DemoAgoraWidget4:
        id: agora
        size_hint: None, None
        size: 600, 600
    ButtonLayout:
        id: button_layout
        size_hint: None, None
        size: 200, 600

<ButtonLayout>
    orientation: 'vertical'
    padding: [20, 100, 20, 100]
    spacing: 40
    canvas:
        Color:
            rgb: 0.05, 0.18, 0.22
        Rectangle:
            pos: self.pos
            size: self.size
    #AnchorLayout: # use this if centering stops working for some reason
    SaveToFileButton:
        id: save_to_file_button
        size_hint: None, None
        size: 160, 80
        text: 'Mentsd ezt el!'
    LoadFromFileButton:
        id: load_from_file_button
        size_hint: None, None
        size: 160, 80
        text: 'Tölts be egy agorát!'
    StartStopSimButton:
        size_hint: None, None
        size: 160, 80
    SkipToEndButton:
        size_hint: None, None
        size: 160, 50
        text: '>>'
        font_size: 32
    Slider:
        id: speed_slider
        min: 0
        max: 100
        value: 80
        step: 1
        orientation: 'horizontal'

<SaveToFilePopup>
    text_input: text_input
    canvas.before:
        Color:
            rgb: 0.05, 0, 0.2
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            on_selection: text_input.text = self.selection and self.selection[0] or ''
        TextInput:
            id: text_input
            height: 30
            size_hint_y: None
            multiline: False
        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: 30
            Button:
                id: save_button
                text: "Mentsed"
                on_release: root.save(filechooser.path, text_input.text)
            Button:
                text: "Hagyjad"
                on_release: root.cancel()

<LoadFromFilePopup>
    canvas.before:
        Color:
            rgb: 0.05, 0, 0.2
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: 30
            Button:
                id: save_button
                text: "Töltsd be"
                on_release: root.load(filechooser.path, filechooser.selection)
            Button:
                text: "Hagyjad"
                on_release: root.cancel()

<SaveToFileButton>
    text: self.text

<LoadFromFileButton>
    text: self.text

<StartStopSimButton>
    text: self.text

<SpeakerDot>
    drag_rectangle: self.x, self.y, self.width, self.height
    drag_timeout: 10000000
    drag_distance: 0
    size_hint: None, None  #size hints are kind of stupid
    canvas:
        Color:
            rgb: self.color
        Ellipse:
            size: self.width, self.height
            pos: self.pos

<NameTag>
    size: self.texture_size[0] + 5, self.texture_size[1] + 5
    size_hint: None, None
    canvas.before:
        Color:
            rgb: 0.2, 0.2, 0.2
        Rectangle:
            size: self.size
            pos: self.pos
